<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" layout:decorator="shared/layout">

<head>
    <title>Yelp Business Management</title>
    <link rel="stylesheet" th:href="@{/kendoui/css/kendo.common.min.css}" />
    <link rel="stylesheet" th:href="@{/kendoui/css/kendo.default.min.css}" />
    <link rel="stylesheet" th:href="@{/kendoui/css/kendo.default.mobile.min.css}" />
</head>
<body>
    <!-- Content Wrapper. Contains page content -->
    <div layout:fragment="content" class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>
                Business Management
                <small>List</small>
            </h1>
            <ol class="breadcrumb">
                <li><a href="#"><i class="fa fa-dashboard"></i> Business</a></li>
                <li class="active">list</li>
            </ol>
        </section>

        <!-- Main content -->
        <section class="content">
            <!-- Main row -->
            <div class="row">
                <div class="col-lg-12 col-xs-12">
                    <div id="business-grid"></div>
                </div>
            </div>
            <!-- /.row (main row) -->

        </section>
        <!-- /.content -->
    </div>
    <th:block layout:fragment="scriptsblock">
        <script th:src="@{/kendoui/js/kendo.all.min.js}"></script>
        <script>

            var apiUrl = [[${/api/business/search}]];

            $(document).ready(function() {
                $("#business-grid").kendoGrid({
                    dataSource: {
                        type: "odata",
                        transport: {
                            read: apiUrl
                        },
                        schema: {
                            model: {
                                fields: {
                                    name: { type: "string" },
                                    city: { type: "string" },
                                    state: { type: "string" },
                                    postalCode: { type: "string" },
                                    latitude: { type: "number" },
                                    longitude: { type: "number" },
                                    stars: { type: "string" },
                                    reviewCount: { type: "string" },
                                    isOpen: { type: "string" }
                                }
                            }
                        },
                        pageSize: 20,
                        serverPaging: true,
                        serverFiltering: true,
                        serverSorting: true
                    },
                    height: 550,
                    filterable: true,
                    sortable: true,
                    pageable: true,
                    columns: [{
                        field:"Name",
                        title: "Name",
                        filterable: false
                    },{
                        field:"city",
                        title: "City",
                        filterable: false
                    },{
                        field:"state",
                        title: "State",
                        filterable: false
                    },{
                        field:"postalCode",
                        title: "Postal Code",
                        filterable: false
                    },{
                        field:"latitude",
                        title: "Latitude",
                        filterable: false
                    },{
                        field:"longitude",
                        title: "Longitude",
                        filterable: false
                    },{
                        field:"stars",
                        title: "Stars",
                        filterable: false
                    },{
                        field:"reviewCount",
                        title: "ReviewCount",
                        filterable: false
                    },{
                        field:"isOpen",
                        title: "Is Open",
                        filterable: false
                    }
                    ]
                });
            });
        </script>
    </th:block>
</body>
</html>